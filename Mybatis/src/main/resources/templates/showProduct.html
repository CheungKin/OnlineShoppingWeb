<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Product</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet"
	href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
	integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/"
	crossorigin="anonymous">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>
<body>

	<div class="jumbotron text-center" style="margin-bottom: 0">
		<h2 th:text="${product.productName}">Product</h2>
	</div>
	<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
		<ul class="navbar-nav">
			<li class="navbar-item" th:if="${session.userName == null}"><a
				class="nav-link " th:href="@{/login}">Log In</a></li>
			<li class="navbar-item" th:if="${session.userName == null}"><a
				class="nav-link " th:href="@{/users/create}">Sign up</a></li>
			<li class="navbar-item dropdown" th:if="${session.userName != null}">
				<a class="nav-link dropdown-toggle" href="#" id="navbardrop"
				data-toggle="dropdown">Hi, <span th:text="${session.userName}"></span></a>
				<div class="dropdown-menu">
					<a class="dropdown-item"
						th:href="@{/users/update/{id}(id=${session.userId})}">Update</a> <a
						class="dropdown-item" th:href="@{/logout}">Log Out</a>
				</div>
			</li>
			<li class="nav-item"><a class="nav-link"
				th:href="@{/products/create}"><i class="fas fa-th"></i> Create
					product</a></li>
			<li class="nav-item"><a class="nav-link" th:href="@{/users/}"><i
					class="fas fa-user"></i> List Users</a></li>
		</ul>
	</nav>

	<div class="container" style="margin-top: 30px">
		<div class="row">
			<div class="col-sm-4">
				<h1>
					Photo of <span th:text="${product.productName}"></span>
				</h1>
				<img th:src="@{${product.photo}}" class="img-thumbnail" width="300"
					height="300">
			</div>
			<div class="col-sm-8">
				<div class="card"
					style="width: 500px; margin-left: auto; margin-right: auto">
					<h3>Category:</h3>
					<h5>
						<span th:text="${product.category}"></span>
					</h5>
					<br>
					<h3>Stock:</h3>
					<h5>
						<span th:text="${product.stock}"></span>
					</h5>
					<br>
					<h3>Price:</h3>
					<h5>
						<span th:text="${product.price}"></span>
					</h5>
					<br>

					<form th:action="@{/cart/{id}(id=${product.productId})}"
						method="POST" th:if="${product.stock > 0}">
						<div class="form-group">
							<h3>
								<label for="quantity">Quantity:</label>
							</h3>
							<input type="number" id="quanitiy" name="quantity" th:value="1"
								th:min="1" th:max="${product.stock}" class="form-control">
						</div>
						<input type="submit" class="btn btn-outline-secondary"
							value="Add to cart" />
					</form>
					<h3 th:unless="${product.stock > 0}">Out of stock!</h3>
					<p>
					<h5>
						<a th:href="@{/products/update/{id}(id=${product.productId})}"><i
							class="far fa-edit"></i> Update</a>
					</h5>
					<p>
					<h5>
						<a th:href="@{/products/deleteById/{id}(id=${product.productId})}"
							onclick="return confirm('Are you sure?')"><i
							class="fas fa-user-minus"></i> Delete</a>
					</h5>
				</div>
			</div>
		</div>
	</div>
	<div class="container">
		<h2>Comment:</h2>
		<p th:if="${comments == null}">No comment.</p>
		<ol th:each="comment: ${comments}">
			<h4>
				<li><span th:text="${comment.userName}"></span>:
					<span th:text="${comment.userComment}"></span></li>
			</h4>
		</ol>
		<div th:if="${showComment}==true">
		<form th:action="@{/products/addComment}" method="POST">
			<div class="form-group">
				<input type="hidden" name="productId"
					th:value="${product.productId}"> <label for="comment">Your
					comment:</label>
				<textarea id="comment" name="userComment" rows="4" cols="50"
					class="form-control"></textarea>
			</div>
			<br> <input type="submit" class="btn btn-primary" value="Submit" />
		</form>
		</div>
	</div>
</body>
</html>